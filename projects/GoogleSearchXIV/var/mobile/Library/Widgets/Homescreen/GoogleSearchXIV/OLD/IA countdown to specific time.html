<html>

<head>
    <title>IA Specific Countdown Timer</title>
</head>

<body>
    <p id="pmDebugTime"></p>
    <script>
        window.onload = function() {
            // // Set User's A.M. Hour
            // var day = (24 * 60);
            // var userSetAmTime = (7 * 60);
            // var getCurrentTime = new Date();
            // var getCurrentMinutes = getCurrentTime.getMinutes();
            // var getCurrentHours = getCurrentTime.getHours();
            // var amResetCount = (day - (getCurrentHours * 60) - getCurrentMinutes) + userSetAmTime;

            // var resetTimer = getCurrentTime.setMinutes(getCurrentTime.getMinutes() + amResetCount);

            // var timer = setInterval(function() {

            //     var now = new Date().getTime();
            //     var timeRemaining = (resetTimer - now);

            //     var hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            //     var minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));

            //     alert(hours + "h " + minutes + "m");

            //     if (timeRemaining < 0) {
            //         clearInterval(timer);
            //         window.top.location = window.top.location;
            //     }
            // }, 1000);
        setPmTime();
        }

        var pmTime = 5;

        if (pmTime < 12) {
            pmTime = pmTime + 12;
        }

        function setPmTime() {
          var day = (24 * 60);
          var userSetPmTime = (pmTime * 60);
          var getCurrentTime = new Date();
          var getCurrentMinutes = getCurrentTime.getMinutes();
          var getCurrentHours = getCurrentTime.getHours();
          var pmResetCount = (day - (getCurrentHours * 60) - getCurrentMinutes) + userSetPmTime;

          var resetTimer = new Date().setMinutes(getCurrentMinutes + pmResetCount);

          var timer = setInterval(function() {

              var now = new Date();
              var timeRemaining = (resetTimer - now);
              console.log(timeRemaining);

              var hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
              var minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));

              var pmDebugTime = document.getElementById("pmDebugTime").innerHTML = (hours + "h " + minutes + "m");
              // alert(hours + "h " + minutes + "m");

              if (timeRemaining < 0) {
                  clearInterval(timer);
                  pmDebugTime = document.getElementById("pmDebugTime").innerHTML = ("DONE");  
              }
          }, 1000);
      }
    </script>
</body>

</html>